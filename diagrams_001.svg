<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="622px" preserveAspectRatio="none" style="width:1466px;height:622px;background:#FFFFFF;" version="1.1" viewBox="0 0 1466 622" width="1466px" zoomAndPan="magnify"><defs/><g><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="459.6582" width="8" x="19.1826" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="23" x2="23" y1="81.4883" y2="541.1465"/></g><g><title>main</title><rect fill="#000000" fill-opacity="0.00000" height="459.6582" width="8" x="71.1338" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="74.3652" x2="74.3652" y1="81.4883" y2="541.1465"/></g><g><title>GetDataDir</title><rect fill="#000000" fill-opacity="0.00000" height="459.6582" width="8" x="185.7085" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="189.4082" x2="189.4082" y1="81.4883" y2="541.1465"/></g><g><title>ListInfoMap</title><rect fill="#000000" fill-opacity="0.00000" height="459.6582" width="8" x="311.8237" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="315.3462" x2="315.3462" y1="81.4883" y2="541.1465"/></g><g><title>Marshal</title><rect fill="#000000" fill-opacity="0.00000" height="459.6582" width="8" x="401.8623" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="405.3013" x2="405.3013" y1="81.4883" y2="541.1465"/></g><g><title>ListInfo</title><rect fill="#000000" fill-opacity="0.00000" height="459.6582" width="8" x="507.9375" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="511.7607" x2="511.7607" y1="81.4883" y2="541.1465"/></g><g><title>ProcessList</title><rect fill="#000000" fill-opacity="0.00000" height="459.6582" width="8" x="682.9229" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="686.3252" x2="686.3252" y1="81.4883" y2="541.1465"/></g><g><title>FlattenAndGenUniqueDomainList</title><rect fill="#000000" fill-opacity="0.00000" height="459.6582" width="8" x="856.647" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="860.5205" x2="860.5205" y1="81.4883" y2="541.1465"/></g><g><title>Flatten</title><rect fill="#000000" fill-opacity="0.00000" height="459.6582" width="8" x="1015.896" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1019.7734" x2="1019.7734" y1="81.4883" y2="541.1465"/></g><g><title>DomainTrie</title><rect fill="#000000" fill-opacity="0.00000" height="459.6582" width="8" x="1184.3242" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1187.7988" x2="1187.7988" y1="81.4883" y2="541.1465"/></g><g><title>ToProto</title><rect fill="#000000" fill-opacity="0.00000" height="459.6582" width="8" x="1274.5269" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1277.8496" x2="1277.8496" y1="81.4883" y2="541.1465"/></g><g><title>router_GeoSiteList</title><rect fill="#000000" fill-opacity="0.00000" height="459.6582" width="8" x="1387.1069" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1390.2041" x2="1390.2041" y1="81.4883" y2="541.1465"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.3652" x="5" y="78.5352">User</text><ellipse cx="23.1826" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.1826,21.5 L23.1826,48.5 M10.1826,29.5 L36.1826,29.5 M23.1826,48.5 L10.1826,63.5 M23.1826,48.5 L36.1826,63.5" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.3652" x="5" y="553.6816">User</text><ellipse cx="23.1826" cy="565.1348" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.1826,573.1348 L23.1826,600.1348 M10.1826,581.1348 L36.1826,581.1348 M23.1826,600.1348 L10.1826,615.1348 M23.1826,600.1348 L36.1826,615.1348" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="main"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47.5371" x="51.3652" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33.5371" x="58.3652" y="70.5352">main</text></g><g class="participant participant-tail" data-participant="main"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47.5371" x="51.3652" y="540.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33.5371" x="58.3652" y="560.6816">main</text></g><g class="participant participant-head" data-participant="GetDataDir"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88.6006" x="145.4082" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74.6006" x="152.4082" y="70.5352">GetDataDir</text></g><g class="participant participant-tail" data-participant="GetDataDir"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88.6006" x="145.4082" y="540.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74.6006" x="152.4082" y="560.6816">GetDataDir</text></g><g class="participant participant-head" data-participant="ListInfoMap"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92.9551" x="269.3462" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.9551" x="276.3462" y="70.5352">ListInfoMap</text></g><g class="participant participant-tail" data-participant="ListInfoMap"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92.9551" x="269.3462" y="540.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.9551" x="276.3462" y="560.6816">ListInfoMap</text></g><g class="participant participant-head" data-participant="Marshal"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67.1221" x="372.3013" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.1221" x="379.3013" y="70.5352">Marshal</text></g><g class="participant participant-tail" data-participant="Marshal"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67.1221" x="372.3013" y="540.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.1221" x="379.3013" y="560.6816">Marshal</text></g><g class="participant participant-head" data-participant="ListInfo"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.3535" x="479.7607" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.3535" x="486.7607" y="70.5352">ListInfo</text></g><g class="participant participant-tail" data-participant="ListInfo"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.3535" x="479.7607" y="540.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.3535" x="486.7607" y="560.6816">ListInfo</text></g><g class="participant participant-head" data-participant="ProcessList"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89.1953" x="642.3252" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.1953" x="649.3252" y="70.5352">ProcessList</text></g><g class="participant participant-tail" data-participant="ProcessList"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89.1953" x="642.3252" y="540.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.1953" x="649.3252" y="560.6816">ProcessList</text></g><g class="participant participant-head" data-participant="FlattenAndGenUniqueDomainList"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="238.2529" x="741.5205" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="224.2529" x="748.5205" y="70.5352">FlattenAndGenUniqueDomainList</text></g><g class="participant participant-tail" data-participant="FlattenAndGenUniqueDomainList"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="238.2529" x="741.5205" y="540.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="224.2529" x="748.5205" y="560.6816">FlattenAndGenUniqueDomainList</text></g><g class="participant participant-head" data-participant="Flatten"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60.2451" x="989.7734" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.2451" x="996.7734" y="70.5352">Flatten</text></g><g class="participant participant-tail" data-participant="Flatten"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60.2451" x="989.7734" y="540.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.2451" x="996.7734" y="560.6816">Flatten</text></g><g class="participant participant-head" data-participant="DomainTrie"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93.0508" x="1141.7988" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.0508" x="1148.7988" y="70.5352">DomainTrie</text></g><g class="participant participant-tail" data-participant="DomainTrie"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93.0508" x="1141.7988" y="540.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.0508" x="1148.7988" y="560.6816">DomainTrie</text></g><g class="participant participant-head" data-participant="ToProto"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67.3545" x="1244.8496" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.3545" x="1251.8496" y="70.5352">ToProto</text></g><g class="participant participant-tail" data-participant="ToProto"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67.3545" x="1244.8496" y="540.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.3545" x="1251.8496" y="560.6816">ToProto</text></g><g class="participant participant-head" data-participant="router_GeoSiteList"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137.8057" x="1322.2041" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123.8057" x="1329.2041" y="70.5352">router_GeoSiteList</text></g><g class="participant participant-tail" data-participant="router_GeoSiteList"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137.8057" x="1322.2041" y="540.1465"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123.8057" x="1329.2041" y="560.6816">router_GeoSiteList</text></g><g class="message" data-participant-1="User" data-participant-2="main"><polygon fill="#181818" points="63.1338,108.7988,73.1338,112.7988,63.1338,116.7988,67.1338,112.7988" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="23.1826" x2="69.1338" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21.4551" x="30.1826" y="108.0566">run</text></g><g class="message" data-participant-1="main" data-participant-2="GetDataDir"><polygon fill="#181818" points="177.7085,138.1094,187.7085,142.1094,177.7085,146.1094,181.7085,142.1094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="75.1338" x2="183.7085" y1="142.1094" y2="142.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.5747" x="82.1338" y="137.3672">locate data dir</text></g><g class="message" data-participant-1="main" data-participant-2="ListInfoMap"><polygon fill="#181818" points="303.8237,167.4199,313.8237,171.4199,303.8237,175.4199,307.8237,171.4199" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="75.1338" x2="309.8237" y1="171.4199" y2="171.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.0313" x="82.1338" y="166.6777">make/map init</text></g><g class="message" data-participant-1="main" data-participant-2="ListInfoMap"><polygon fill="#181818" points="303.8237,196.7305,313.8237,200.7305,303.8237,204.7305,307.8237,200.7305" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="75.1338" x2="309.8237" y1="200.7305" y2="200.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.1543" x="82.1338" y="195.9883">for each file -&gt; Marshal(path)</text></g><g class="message" data-participant-1="Marshal" data-participant-2="ListInfo"><polygon fill="#181818" points="499.9375,226.041,509.9375,230.041,499.9375,234.041,503.9375,230.041" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="405.8623" x2="505.9375" y1="230.041" y2="230.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.0752" x="412.8623" y="225.2988">NewListInfo()</text></g><g class="message" data-participant-1="Marshal" data-participant-2="ListInfo"><polygon fill="#181818" points="499.9375,255.3516,509.9375,259.3516,499.9375,263.3516,503.9375,259.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="405.8623" x2="505.9375" y1="259.3516" y2="259.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59.0078" x="412.8623" y="254.6094">set Name</text></g><g class="message" data-participant-1="Marshal" data-participant-2="ProcessList"><polygon fill="#181818" points="674.9229,284.6621,684.9229,288.6621,674.9229,292.6621,678.9229,288.6621" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="405.8623" x2="680.9229" y1="288.6621" y2="288.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.8174" x="412.8623" y="283.9199">ProcessList(file)</text></g><g class="message" data-participant-1="ProcessList" data-participant-2="ListInfo"><polygon fill="#181818" points="522.9375,313.9727,512.9375,317.9727,522.9375,321.9727,518.9375,317.9727" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="516.9375" x2="685.9229" y1="317.9727" y2="317.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150.9854" x="528.9375" y="313.2305">populate lists and maps</text></g><g class="message" data-participant-1="main" data-participant-2="ListInfoMap"><polygon fill="#181818" points="303.8237,343.2832,313.8237,347.2832,303.8237,351.2832,307.8237,347.2832" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="75.1338" x2="309.8237" y1="347.2832" y2="347.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.6899" x="82.1338" y="342.541">FlattenAndGenUniqueDomainList()</text></g><g class="message" data-participant-1="FlattenAndGenUniqueDomainList" data-participant-2="ListInfo"><polygon fill="#181818" points="522.9375,372.5938,512.9375,376.5938,522.9375,380.5938,518.9375,376.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="516.9375" x2="859.647" y1="376.5938" y2="376.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227.938" x="528.9375" y="371.8516">determine levels and call Flatten(lm)</text></g><g class="message" data-participant-1="Flatten" data-participant-2="DomainTrie"><polygon fill="#181818" points="1176.3242,401.9043,1186.3242,405.9043,1176.3242,409.9043,1180.3242,405.9043" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1019.896" x2="1182.3242" y1="405.9043" y2="405.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132.4819" x="1026.896" y="401.1621">Insert domains (&#21435;&#37325;)</text></g><g class="message" data-participant-1="DomainTrie" data-participant-2="Flatten"><polygon fill="#181818" points="1030.896,431.2148,1020.896,435.2148,1030.896,439.2148,1026.896,435.2148" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1024.896" x2="1187.3242" y1="435.2148" y2="435.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.4282" x="1036.896" y="430.4727">return unique domains</text></g><g class="message" data-participant-1="main" data-participant-2="ListInfoMap"><polygon fill="#181818" points="303.8237,460.5254,313.8237,464.5254,303.8237,468.5254,307.8237,464.5254" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="75.1338" x2="309.8237" y1="464.5254" y2="464.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.7632" x="82.1338" y="459.7832">ToProto(excludeAttrs)</text></g><g class="message" data-participant-1="ListInfoMap" data-participant-2="ListInfo"><polygon fill="#181818" points="499.9375,489.8359,509.9375,493.8359,499.9375,497.8359,503.9375,493.8359" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="315.8237" x2="505.9375" y1="493.8359" y2="493.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.1475" x="322.8237" y="489.0938">ToGeoSite()</text></g><g class="message" data-participant-1="ListInfo" data-participant-2="router_GeoSiteList"><polygon fill="#181818" points="1379.1069,519.1465,1389.1069,523.1465,1379.1069,527.1465,1383.1069,523.1465" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="511.9375" x2="1385.1069" y1="523.1465" y2="523.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.6362" x="518.9375" y="518.4043">append GeoSite</text></g><!--SRC=[VLAzJiCm4Dxp5Dv8XugT0Gcfege428aoerDoLIqSszWNO6IZIFniCF0EF01Kl4s4c7W5pY6XCH0sttVV-UxxxjP4zNnNBHwgnzUFvUBjwQAwllzONYMGaN7YqADBB3YIcRIWIHGWTGICaKP0C98nRqTwckYPsGKRuRlW_1pKdzm8t7ScG-z3BiAt5H2XtjBv6FMXbYSbZaoOgeyPOL_KgPCOmLF3xIWUm9cIq1sDqHn8mlht9DWXXfkr2s93k58dzPEXbG-SK2O3Gf4p879sfYLrN65M0SUuNl1JQaazd1al0I6RYvbK6DADWQa5cW-I9khMST4UdhLHsiVnI68F2kocEvupenEbeViWwUQ7yNVMs585pOenBq3dBC_w7bN_Bf57_ZV_GqYElAP2QcwDfwY-UcUWLDibLSNtZw5sTGDSFT6yKX9vZNcHLhSlxvStWwH32ahRSjuvKkcqAEkXsheUcSrPfNYUgJB7BIBd1qcN4qkPckRQqXKhK7wV8fF1McIb3VW9]--></g></svg>